<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HSEC1242SP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-HSEC1242SP');
    </script>
    
    <!-- Google Consent Mode - Default Settings -->
    <script>
        // Define dataLayer and the gtag function.
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}

        // Set default consent to 'denied' as a placeholder
        // Determine actual values based on your own requirements
        gtag('consent', 'default', {
          'ad_storage': 'denied',
          'ad_user_data': 'denied',
          'ad_personalization': 'denied',
          'analytics_storage': 'denied'
        });
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de QR Code - LinkZin</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="favicon linkzin.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3026521456856935"
     crossorigin="anonymous"></script>
    <!-- Google Ads ser√° carregado dinamicamente ap√≥s consentimento GDPR -->
</head>

<body>
    <!-- Banner de Consentimento GDPR - LinkZin -->
    <div id="gdpr-consent" style="position:fixed;bottom:0;left:0;width:100%;background:#002147;color:#fff;padding:20px;text-align:center;z-index:9999;font-family:Arial,sans-serif;box-shadow:0 -2px 8px rgba(0,0,0,0.3);">
        <p style="margin:0 0 10px 0;font-size:14px;line-height:1.5;max-width:800px;margin-left:auto;margin-right:auto;">
            üì¢ Usamos cookies e tecnologias semelhantes para melhorar sua experi√™ncia, personalizar an√∫ncios e analisar o tr√°fego.  
            De acordo com as leis de privacidade do Espa√ßo Econ√≥mico Europeu (EEE), Reino Unido e Su√≠√ßa, pedimos seu consentimento para processar dados pessoais.  
            <a href="privacidade.html" style="color:#ffd700;text-decoration:underline;">Saiba mais</a>
        </p>
        <button onclick="setConsent(true)" style="background:#ffd700;color:#002147;padding:8px 15px;border:none;border-radius:5px;cursor:pointer;margin-right:8px;font-weight:bold;">
            Aceitar
        </button>
        <button onclick="setConsent(false)" style="background:transparent;color:white;padding:8px 15px;border:1px solid white;border-radius:5px;cursor:pointer;">
            Recusar
        </button>
    </div>

    <script>
    // Lista de pa√≠ses EEE + UK + Su√≠√ßa
    const eeeCountries = [
        "AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","IE","IT",
        "LV","LI","LT","LU","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","CH","GB"
    ];

    // Verifica localiza√ß√£o
    fetch("https://ipapi.co/json/")
        .then(res => res.json())
        .then(data => {
            if (!eeeCountries.includes(data.country)) {
                document.getElementById('gdpr-consent').style.display = 'none';
                loadAds(); // Carrega an√∫ncios normalmente para fora do EEE
            }
        })
        .catch(() => {
            // Se API falhar, exibe banner por seguran√ßa
        });

    // Define consentimento
    function setConsent(accepted) {
        localStorage.setItem("gdprConsent", accepted ? "granted" : "denied");
        document.getElementById("gdpr-consent").style.display = "none";
        if (accepted) {
            loadAds();
        }
    }

    // Oculta se j√° definido e carrega an√∫ncios se aceitou
    if (localStorage.getItem("gdprConsent")) {
        document.getElementById("gdpr-consent").style.display = "none";
        if (localStorage.getItem("gdprConsent") === "granted") {
            loadAds();
        }
    }

    // Fun√ß√£o para carregar an√∫ncios do Google
    function loadAds() {
        let adsScript = document.createElement("script");
        adsScript.async = true;
        adsScript.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3026521456856935";
        adsScript.crossOrigin = "anonymous";
        document.head.appendChild(adsScript);
    }
    </script>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html">
                        <img src="LOGO_LINKZIN_005.png" alt="LinkZin" class="logo-img">
                    </a>
                </div>
                <nav class="nav">
                    <ul class="nav-list">
                        <li><a href="index.html">In√≠cio</a></li>
                        <li><a href="recursos.html">Recursos</a></li>
                        <li><a href="qr-code.html" class="active">Gerador de QR Code</a></li>
                        <li><a href="whatsapp.html">Gerador de link WhatsApp</a></li>
                    </ul>
                </nav>
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- QR Generator Section -->
        <section class="qr-generator-section">
            <div class="container">
                <div class="qr-generator-card">
                    <h2 class="qr-generator-title">Gerador de QR Code</h2>

                    <div class="qr-generator-content">
                        <!-- Left Column - Form -->
                        <div class="qr-form-column">
                            <!-- Content Type Selection -->
                            <div class="content-type-section">
                                <h3 class="content-type-title">Sele√ß√£o do tipo de conte√∫do</h3>
                                <div class="content-type-buttons">
                                    <button type="button" class="content-type-btn active" data-type="link">
                                        <i class="fas fa-link"></i>
                                        Link √∫nico
                                    </button>
                                    <button type="button" class="content-type-btn" data-type="text">
                                        <i class="fas fa-file-text"></i>
                                        Texto
                                    </button>
                                    <button type="button" class="content-type-btn" data-type="email">
                                        <i class="fas fa-envelope"></i>
                                        Email
                                    </button>
                                    <button type="button" class="content-type-btn" data-type="whatsapp">
                                        <i class="fab fa-whatsapp"></i>
                                        WhatsApp
                                    </button>
                                    <button type="button" class="content-type-btn" data-type="wifi">
                                        <i class="fas fa-wifi"></i>
                                        Wi-Fi
                                    </button>
                                    <button type="button" class="content-type-btn" data-type="location">
                                        <i class="fas fa-map-marker-alt"></i>
                                        Localiza√ß√£o
                                    </button>
                                </div>
                            </div>

                            <!-- URL Input -->
                            <div class="url-input-section">
                                <label for="qrContent" class="input-label">URL</label>
                                <input type="text" id="qrContent" class="url-input" placeholder="https://...">
                            </div>

                            <!-- Customization Section -->
                            <div class="customization-section">
                                <h3 class="customization-title">Personaliza√ß√£o</h3>
                                <div class="customization-options">
                                    <div class="color-pickers">
                                        <div class="color-picker">
                                            <label for="foregroundColor">Primeiro plano</label>
                                            <input type="color" id="foregroundColor" value="#000000">
                                        </div>
                                        <div class="color-picker">
                                            <label for="backgroundColor">Fundo</label>
                                            <input type="color" id="backgroundColor" value="#ffffff">
                                        </div>
                                    </div>
                                    <div class="checkbox-option">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="transparentBg">
                                            <span class="checkmark"></span>
                                            Fundo Transparente
                                        </label>
                                    </div>
                                    <div class="logo-upload">
                                        <button type="button" id="uploadLogoBtn" class="upload-logo-btn">
                                            <i class="fas fa-folder"></i>
                                            Carregar Logo
                                        </button>
                                        <input type="file" id="logoFile" accept="image/*" style="display: none;">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column - QR Preview -->
                        <div class="qr-preview-column">
                            <div class="qr-preview-container">
                                <div id="qrPreview" class="qr-preview-area">
                                    <div class="qr-preview-placeholder">
                                        <i class="fas fa-qrcode"></i>
                                        <p>Seu QR Code aparecer√° aqui</p>
                                    </div>
                                </div>
                                <button type="button" id="generateQRBtn" class="generate-qr-btn">
                                    Gerar QR Code
                                </button>
                                <div id="downloadSection" class="download-section" style="display: none;">
                                    <div class="download-options">
                                        <button type="button" id="downloadQRBtn" class="download-qr-btn">
                                            <i class="fas fa-download"></i>
                                            Baixar PNG
                                        </button>
                                        <button type="button" id="downloadEPSBtn" class="download-qr-btn eps-btn">
                                            <i class="fas fa-file-vector"></i>
                                            Baixar EPS
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="qr-features-section">
            <div class="container">
                <h2 class="features-title">Recursos do Gerador</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-infinity"></i>
                        </div>
                        <h3 class="feature-title">QR Codes Permanentes</h3>
                        <p class="feature-description">Seus QR codes nunca expiram e funcionam para sempre</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <h3 class="feature-title">Personaliza√ß√£o Total</h3>
                        <p class="feature-description">Personalize cores, tamanhos e adicione seu logo</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-image"></i>
                        </div>
                        <h3 class="feature-title">Logo Integrado</h3>
                        <p class="feature-description">Adicione seu logo no centro do QR code</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-download"></i>
                        </div>
                        <h3 class="feature-title">Download em Alta Qualidade</h3>
                        <p class="feature-description">Baixe seu QR code em diferentes formatos</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3 class="feature-title">Compat√≠vel</h3>
                        <p class="feature-description">Funciona em todos os dispositivos e aplicativos</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3 class="feature-title">Alta Confiabilidade</h3>
                        <p class="feature-description">N√≠vel m√°ximo de corre√ß√£o de erros para maior durabilidade</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- An√∫ncio Google AdSense - Display -->
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3026521456856935" data-ad-slot="1074004322" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>
     (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    
    <!-- An√∫ncios Horizontal -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-3026521456856935"
         data-ad-slot="1262207596"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="LOGO_LINKZIN_005.png" alt="LinkZin" class="logo-img">
                </div>
                <div class="footer-links">
                    <a href="index.html">In√≠cio</a>
                    <a href="contador.html">Contador de Cliques</a>
                    <a href="desencurtar.html">Desencurtar URL</a>
                    <a href="recursos.html">Porque LINKZIN?</a>
                    <a href="denunciar.html">Denunciar URL</a>
                    <a href="termos.html">Termos de Servi√ßo</a>
                    <a href="privacidade.html">Privacidade</a>
                    <a href="contato.html">Contato</a>
                </div>
            </div>
            <div class="footer-info">
                <p>&copy; 2025 LinkZin - Ferramenta para encurtar link ¬Æ Desenvolvido por Bruno Ulrich</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const qrContent = document.getElementById('qrContent');
            const generateQRBtn = document.getElementById('generateQRBtn');
            const qrPreview = document.getElementById('qrPreview');
            const downloadSection = document.getElementById('downloadSection');
            const downloadQRBtn = document.getElementById('downloadQRBtn');
            const downloadEPSBtn = document.getElementById('downloadEPSBtn');
            const foregroundColor = document.getElementById('foregroundColor');
            const backgroundColor = document.getElementById('backgroundColor');
            const transparentBg = document.getElementById('transparentBg');
            const uploadLogoBtn = document.getElementById('uploadLogoBtn');
            const logoFile = document.getElementById('logoFile');
            const contentTypeBtns = document.querySelectorAll('.content-type-btn');

            let currentContentType = 'link';
            let uploadedLogo = null;

            // Content type selection
            contentTypeBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    contentTypeBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentContentType = this.dataset.type;

                    // Update placeholder based on content type
                    const placeholders = {
                        'link': 'https://exemplo.com',
                        'text': 'Seu texto aqui...',
                        'email': 'email@exemplo.com',
                        'whatsapp': '+55 11 99999-9999',
                        'wifi': 'SSID: MinhaRede\nSenha: 12345678',
                        'location': 'Endere√ßo ou coordenadas'
                    };
                    qrContent.placeholder = placeholders[currentContentType] || 'https://...';
                });
            });

            // Logo upload
            uploadLogoBtn.addEventListener('click', function () {
                logoFile.click();
            });

            logoFile.addEventListener('change', function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        uploadedLogo = e.target.result;
                        alert('Logo carregado com sucesso!');
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Generate QR Code
            generateQRBtn.addEventListener('click', function () {
                const content = qrContent.value.trim();
                if (!content) {
                    alert('Por favor, insira o conte√∫do para gerar o QR code.');
                    return;
                }

                // Clear previous QR code
                qrPreview.innerHTML = '';

                // Generate QR code with customization
                const options = {
                    width: 200,
                    height: 200,
                    margin: 2,
                    color: {
                        dark: foregroundColor.value,
                        light: transparentBg.checked ? '#ffffff' : backgroundColor.value
                    }
                };

                try {
                    // Limpar preview
                    qrPreview.innerHTML = '';
                    
                    // Criar div para o QR code
                    const qrDiv = document.createElement('div');
                    qrDiv.id = 'qrcode';
                    qrDiv.style.textAlign = 'center';
                    qrPreview.appendChild(qrDiv);
                    
                    // Gerar QR code permanente usando QRCode.js
                    new QRCode(qrDiv, {
                        text: content,
                        width: 200,
                        height: 200,
                        colorDark: foregroundColor.value,
                        colorLight: transparentBg.checked ? '#ffffff' : backgroundColor.value,
                        correctLevel: QRCode.CorrectLevel.H, // N√≠vel mais alto de corre√ß√£o de erros
                        version: 1, // Vers√£o fixa para consist√™ncia
                        maskPattern: 0 // Padr√£o de m√°scara fixo
                    });
                    
                    // Adicionar informa√ß√µes sobre a perman√™ncia do QR code
                    const infoDiv = document.createElement('div');
                    infoDiv.className = 'qr-permanent-info';
                    infoDiv.innerHTML = '<small style="color: #666; font-size: 12px; margin-top: 10px; display: block; text-align: center;">‚úì QR Code permanente - n√£o expira</small>';
                    qrPreview.appendChild(infoDiv);
                    
                    // Adicionar estilo ao canvas gerado
                    const canvas = qrDiv.querySelector('canvas');
                    if (canvas) {
                        canvas.style.maxWidth = '100%';
                        canvas.style.height = 'auto';
                        canvas.style.border = '1px solid #ddd';
                        canvas.style.borderRadius = '8px';
                    }
                    
                    downloadSection.style.display = 'block';
                } catch (error) {
                    console.error('Erro ao gerar QR code:', error);
                    alert('Erro ao gerar QR code. Tente novamente.');
                }
            });

            // Download QR Code PNG
            downloadQRBtn.addEventListener('click', function () {
                const canvas = qrPreview.querySelector('canvas');
                if (canvas) {
                    const link = document.createElement('a');
                    link.download = 'qrcode-linkzin.png';
                    link.href = canvas.toDataURL();
                    link.click();
                    showNotification('QR Code PNG baixado com sucesso!', 'success');
                }
            });

            // Download QR Code EPS
            downloadEPSBtn.addEventListener('click', function () {
                const canvas = qrPreview.querySelector('canvas');
                if (canvas) {
                    generateEPSFromCanvas(canvas, 'qrcode-linkzin.eps');
                    showNotification('QR Code EPS gerado com sucesso!', 'success');
                }
            });

            // Fun√ß√£o para gerar arquivo EPS
            function generateEPSFromCanvas(canvas, filename) {
                const ctx = canvas.getContext('2d');
                const width = canvas.width;
                const height = canvas.height;
                
                // Obter dados da imagem
                const imageData = ctx.getImageData(0, 0, width, height);
                const data = imageData.data;
                
                // Obter cores personalizadas
                const fgColor = foregroundColor.value;
                const bgColor = transparentBg.checked ? '#ffffff' : backgroundColor.value;
                
                // Converter cores hex para RGB
                const fgRGB = hexToRgb(fgColor);
                const bgRGB = hexToRgb(bgColor);
                
                // Criar conte√∫do EPS
                let epsContent = `%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: 0 0 ${width} ${height}
%%Creator: LinkZin QR Code Generator
%%Title: QR Code
%%CreationDate: ${new Date().toISOString()}
%%EndComments

% Configura√ß√µes iniciais
/Helvetica findfont 12 scalefont setfont

% Definir cores
${fgRGB.r/255} ${fgRGB.g/255} ${fgRGB.b/255} setrgbcolor

% Fun√ß√£o para desenhar pixel
/pixel {
    newpath
    moveto
    1 0 rlineto
    0 1 rlineto
    -1 0 rlineto
    closepath
    fill
} def

% Desenhar QR Code
`;

                // Converter pixels para comandos EPS
                for (let y = 0; y < height; y++) {
                    for (let x = 0; x < width; x++) {
                        const index = (y * width + x) * 4;
                        const r = data[index];
                        const g = data[index + 1];
                        const b = data[index + 2];
                        
                        // Se o pixel √© escuro (QR code)
                        if (r < 128 || g < 128 || b < 128) {
                            epsContent += `${x} ${height - y} pixel\n`;
                        }
                    }
                }
                
                epsContent += `\n%%EOF`;
                
                // Criar blob e download
                const blob = new Blob([epsContent], { type: 'application/postscript' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            }

            // Fun√ß√£o auxiliar para converter hex para RGB
            function hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : {r: 0, g: 0, b: 0};
            }

            // Fun√ß√£o para mostrar notifica√ß√µes
            function showNotification(message, type = 'info') {
                // Remover notifica√ß√£o anterior se existir
                const existingNotification = document.querySelector('.notification');
                if (existingNotification) {
                    existingNotification.remove();
                }

                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-info-circle'}"></i>
                    <span>${message}</span>
                `;
                
                // Adicionar estilos inline
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? '#28a745' : '#17a2b8'};
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-size: 14px;
                    font-weight: 500;
                    animation: slideInRight 0.3s ease-out;
                `;
                
                document.body.appendChild(notification);
                
                // Remover ap√≥s 3 segundos
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.style.animation = 'slideOutRight 0.3s ease-out';
                        setTimeout(() => {
                            if (notification.parentNode) {
                                notification.remove();
                            }
                        }, 300);
                    }
                }, 3000);
            }

            // Adicionar estilos de anima√ß√£o para notifica√ß√µes
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
                
                @keyframes slideOutRight {
                    from {
                        transform: translateX(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>

</html>